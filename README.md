## javascript模拟鸟群使用cax和threejs渲染引擎
cax是一款我非常喜欢的渲染引擎，支持小程序、小游戏以及 Web 浏览器渲染。用它既能开发小游戏也能开发图表（见wechart），拥有简洁轻巧的AP，它抹平了各环境的API使用差异，减少了学习和代码移植成本，做到了一套代码通吃各端！Learn Once, Write Anywhere & Write Once, Run Anywhere ！

本文会使用前端技术来模拟鸟群，我选用canvas绘制，当然也可以使用css3或者svg。canvas渲染引擎的选择就不说了，你已经知道了，好了我们开始吧~

鸟群（flocking）是啥？ 如下图 ↓

这些鸟并不是在漫无目的的乱飞，它们看上去都拥有了智商，形成了群体，产生了复杂的群组运动效果

这看上去复杂的行为是一种复合行为，通常会拆分为下面几种

分离（separation）
首先对象们要尽量不能与周围的对象相互碰撞，它们彼此不能离的太近，需要给自己留出一个小空间


内聚（cohesion）
也不能和周围对象们离的太远了，太远会被拉回来

排队（alignment）
它们飞行的方向也不能太乱，大体上都会往一个方向上飞，每个对象都会归到一队伍中

这三个特性分离、内聚、排队组合起来，会得到飞车逼真的鸟群（群体）



当然我们可以叠加多层的信息生成更复杂的模拟。这里的鸟都是一类鸟，可以添加一个老鹰对象，如果小鸟和老鹰的距离超过了一定阈值小鸟就会立马逃跑。要模拟这种情况，只要再添加一种逃离的行为到整个系统中，这种行为还会导致小鸟的总转向力，速度全部上升。

本文实现是二维的模拟，过渡到三维也不复杂，增加了一个维度而已，算法基本相同。需要注意的是对象的旋转问题，得运用四元数旋转，把对象旋转至速度方向。

请期待下篇=w=


